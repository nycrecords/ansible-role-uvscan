language: python
python:
- 3.7
env:
  global:
  - MOLECULE_DEBUG: 'true'
  - ROLE_NAME: uvscan
  - EC2_REGION: us-east-1
  - secure: YuO4Vr+zZj7VRTu/QK1ACRNA6Kv8Q0dpNYam2dOeFaroV4loBBilVnQ9NHQ+S1RlZ+ah+lV/8iCrvMF7RowZ88N0+zDDX2yV+633OyrBfmz8XJE/cnMKFzdZ7kAKButOZsIO3YH6FyOWrhpA4e/AoSJ3lDUfUDc07M6C4Z+L3Y3D95WLrf9dy62Ps+KvjohbSpE8ymHFrlWlK26psMDWZgo0EVSYkprp4+KAsSsGzjy7Tqlvhr2tHogSM35k7LcB3y6BUxfm4hwq+krYdPMY8nvsRTUGF+pPEQt7tF7a0bcMSdTE4yCFxkvw/R3vEKGs4OI2aC7OPvP0RUVwTnVTfZHVQwDXD94gYZrS0q41HDbWKU7/sj7+nWMyC9bdmEgEU7Hp/pQUvDq8h0AGlOpJ2ObO2R/MKJlGlzr2FQFOR4w1V186xWHiQiKCJnKbCP4bbPpfZqUKlcxKFJknWK5O24jklUIFtUSOAsy+JfI3rhdavfBXM/AYOZjrqiHWMEwcfiZEEQOJSHbLGFE7i8t1qtJzcxTNC8HkwMZJ/DHk9TBtk/8uBUlsCPPMqE2K1sCX3bLaVexFRdnqb/KEFQPeSQplo8AFVcC4bMKvX/Z/aMnxOXTIwAsuYW2XXyzt6GMTZRfu52nt+dMTHUCuQpb1ymHBmj7YMsQPExAKdjQ7JEc=
  - secure: OiZ5JVrapuxf+b0UI6leDXMZvsG68mVpXnWbzC67NPKTdo9Bo2QwIVumek8efpKzKgGPt+1FUS5HxAgsnPwg72bqbxb/G5B+C2C2+mdQUV8fT1z/46JX8h7nrDpBU38H7rpziOn3uhlSIdkz5ebqro3qInIzM+sq4ivzYTj6t4YCIZkmApkmB2fyBl2hSixwaazskVG0hr8CxMmNMRIzJ9spBoO7Ttb0dk6aalhi4F9QYrRx/4Nyne6DAs/gs/grFYx6tM4AY1zNZ6nZK8LFLozM0X8+UiuoMCuwhbVHXXNP/JrUEHRtI9oJbmTSZaNO7DgnwbtY03mEwuzAM0ER5cMPrF4j3hT7NeV/j+PgerhuHXTKTFH1PYezVNw1YwSIpGfk+aYGoQtFyXsRnNhHR2rR9Uw/niYzPHVQVtDg45db7dn/OdcbqE4HG5aWwL54BVR+CiFWyzgTGRRqDTsfySibbzTD0gqaiWUOu7eebFicv+Plh+HEnVHLrZF+Tpcci7Gh+gpsDFQZzsMkoFKrCJZctMjY32z2zuEiMjL6yuNvwhf3r8GuecdEYn4e1qCz1lTgpdaz/FDl0v0g73Rz9PL4Xn2bZ7dofeB+XHNKaLFPt8XleKuQITqMqmVr+I1xjPu05jb2VkdfBN8RoITG66kKEBsGE/QhQRQvcQYIOjg=
  - secure: Y0Irt6MJ1PLxcHfrVS2ppgn+IahjR/6AZ6thfaof9B1KaU4hqdQFVR36XsDc5R/umWKsEeHpV7bXTpnSZC6avlQWF4xFEX/rx7jRAYVQyDaeQuyHrjE6V3IVdRiAkU3BQT4sSY2TS31haTNi/ZUgiRdTLcJW2thFmlh/6XUPCOR5o1tlOB1J1A2R3ADDkHbNZ+KiYlrQ8GM8FyImH/6cSN1x8oVMgPnlbkiM2BU7dqGr1G3Aq4q0zdD+ehSTFoMwgV/boxbjqhC6gd93u11LjyJ1Iqg6x4M4OpCsswKgGCK/FjqfFA+ocxTjrTMwKE0d4BuwgKJ8qJeO1WHrlAZqaK2Ko1PGBxG6eOMtCcgLADGSZ0Hd/ZTr9xZ+q+HZ0JCdcZZSPm/puQ4z5dOiPZpC5OfTR3NTMuGBZ7yFnlqwlMzx5wipoRWabneN4sHkvipxFOc+TwL+I2vRGYOIOqcHJuipNcM6RzRRkIVNz4iHryRnbDR0awopXtckV/ijYXGkWDGHgFHI04usSJLo9Y/sRrhpoZhr3HSSiCgh7yLbv8CW22dFhzMPd76As6pawL9lIPMR/0nhHQ/+WAvKCUdq9IDWFRa+RSw28QPCnXsi/XqRwFwQCdDPLh2Qi2r4Ug2YYcN7In363n+QATZFLnB26LbbjcTkR/BNm8efUnLOfPU=
  - secure: bVzQ6/cAvvTLRMCzVKfKQcfAJwlQMn1GTAe+u3mnP1NaPJmB7qsgmLp8yat4M07M8kXZUJN1sK2rvvL+rcORGNzsKsodlScFkg6779CdCzgR+qFNDLL2dTXDwexh6mYSE55wKlcZLae/WNq98LbvbW18aPqd1zvOCuSLKujKSiaG3lOTo3+reB/FWhy+kp2OuB8dcs+3pGH/DLlyFvru/V5lWNx4jzbAZ7eFAQa89EbhcRoU/m/VmRqH+/PBXqxyD/OnpdB2acHvyCYC2gk1btTIA6h71lSUcQZ7Qqogm0GmKuyDhvC1Xq7wt2NiZIgbV+WIEvlT7+UxU0YuihiIwHfDZInWl2Kak5322X/eMUgvJvcD5m0CyRiDyzmyHjt7e6LqWWq6Sbftiln5YL6wQC5N3A44djWC2XpgdJ1NkAI2bY06qL+utj6fPqTiM9ahYdB24hiJRQSwQuoMgWliTpGdZCedjbOPh1qXxKroOelXksc4caN28RORgGZCIs6JhTMDAwK426/ptq9Zt801tUSqQuP1s2ZDFhUu85NVOxlWX6bfqoEh1Kq0X9NSsQUUYawcobJy20Gn8zLeMZpHtiPBVeMzQX2X0T5YEmHwCAB9OS8hP7Z/zljUvLpcgNESygZQ9aYwehmkZBjSdU0pUvhH30gzJ948AeI1yiXCkZw=
install:
- pip install pipenv
- pipenv install
- aws configure set aws_access_key_id $AWS_ACCESS_KEY
- aws configure set aws_secret_access_key $AWS_SECRET_KEY
- aws configure set default.region $EC2_REGION
- aws configure list
script:
- molecule create --scenario-name aws
- molecule converge --scenario-name aws
- molecule verify --scenario-name aws
- molecule destroy --scenario-name aws
notifications:
  webhooks: https://galaxy.ansible.com/api/v1/notifications/
