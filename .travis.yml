language: python
python:
- 3.7
env:
  global:
  - MOLECULE_DEBUG: 'true'
  - ROLE_NAME: uvscan
  - EC2_REGION: us-east-1
  - secure: Ogswt9BjzTxhX/hDLTN+9m1lwTyE7Hb0zk39IOR7b5QU+OJnc89Y3DasHafITwq4utzDHP83tWDoC4Y6Gi5TjynKt4ZmOU9XzRrCIlhoCNLNBBVvtSpAu/1C99uSM/tBvCkdNMn1YuSM8GyHi3n9vx4yW1V+IBOu+ZjE9eOMLAEEjovWDHiO03ogq9p8cFRnAknxo/B+JyX2wx3N2bTI6IIShN3xh4YS0ZPSGkqB1hBTBk5D+CdSbxyDvqS1WM1ny7GFfFfaGwcySPcNvyk1exI60i7Jo61HmcQU4OHmSMYU/xdYZZzvBhyhcOUrdsPtdElex8adDis5eBcSKj1ODrdNPM5x2/CradsgGcAjdM4uDFV925vjXUKddSl0A9nMQmqcrtlzvICwoPPBg3slLRDNuNijHVm2TE8JxdW1zEP7SJd53rjLdGD3M1Im9AusesbuNuhE1d+FnwE2UfplSb41XtAWio+PBZ06Os8u1LCSgHDfRSSjq+yFIaum/Dn3I6ML189NPKN0sc5JN9S91AOFQz1Kb0/RNGVeDKZxlag/adfOjpodlzJlGVm0kH2Z08ew0Wu6QLz8F3zgJbxLFj+AhBJv30HF4BvfHq/++Zo+PgVGRxunyLoU61F0yekXNiDiLY+URIFy0hKqianJdx+Yd5HPvx++jRSnCOUZhwk=
  - secure: S+w8sGpwflR9PY6iB0DMfDK51+2v2ejKX2DuhkzD3JKlghBag4ZgJEE5Anbq7o4ttaeG0qGvxEuL/f4Qu5bxpjZWe+6JMmQomEcWahj8T2oDeYQ+FFhNW4OnA7NgHKHmu6c5QEYnp/22zGDShZwnJ4oRQvRl+x7xt/zcGkDxIJ8mNstwTK3aOGZsB+dhUXimGF5sW2qJunMdIBtD6kFgGi00S1VLgKcpE7yqrInqVU0ePfDNcREqEizJvm/GUcdUb7wR5V/lKGwXigYF+jVZ6j3tGtWx86x3wYC+BlKUVpgjykosEpFVrderlO+xwAHZm1TendosVhflN2yPmDEBberuf9ZFaSpZj3lp9loZUT4kpsJoLiBXhORewxi4FU5lYq/yOYasrnLMbV3ji/XxOs7M+icMQvTyB3Zpnz8R8rWIuhraGBFpl/BsUZbIL+kI+QTUwjLud+HFs2RmXJWZ96qqjfEp6mgcehrVhhG5t9AYMRRQpoScJ2/m1KidqVtdY4+dzEBMLwjvPOXop7QokzdN8ihK2nGaXOl4nhRkYENfBXCZ2wcIOSU4wm3E+g9M1afsIBuOTaeJVsMxChOiFNnxEjtAJqJhx7k3gVcRlFWKjGtUPFec31bxdKtGiFjDYUMFCo69ckK/v6go3JnDJAba6CE13skw/ZCPtjZjPUc=
  - secure: fjxCnjZ/rVa5w+kVBsBbq1PTklc8I6dpMKWR2mQvM6UYpwMgiq4LGjYeIRN7KmShyTD0t1xKTkrHGbNBRRvsr5NJ16VhNJRvwK2y8w3he+8pYHhPouPwa4GeFqIOP+udCzXsbxVw1qPH55JdtaYs4vc3KpjyQZZV6q78DaXAD+kuDZP0N1IiLtAca4XH6ZnjGMiJYmpsfhYmrU532GW4a9FuhZHuDrnOmth7DTMaeKS9iIj6YG38tEwLgDvdJZDpP+6w4kHtIOXUA4WgutldW0WXzoWdzLsMkuOyqNrWL6gJo4SRCcgUDl0LMz/9M+9RVv0lDc8V5aqZUnbi5RyVhQJsk4+IGDvRQ+ocymENCICYsaI+9JYS0KjEuWTLCnoGRGJUG6CS2odKU0JUfOcYjXZ0wn/ZzmsTj70YkD0Umfh5e7O4RxN2Xv76Hs2s/vb1sS9+vXGGWtafQX2OuFxqnyE5srWDADuWXb7UCbA7xSbznb2GT+BKwb11P4fkn+S+t2eQtihJlRszVVgzf/LstqIGeu2IpRVFm30mpXuZ9N2g48dhQ/QuDoj7o/AtrpkAh0mVgFWziQDZGzajcFw0WD8IEIFGsrcoOXJRJhEFNcBkO4HWby+bhFHpehPxLfH8mt+EFLHypN/AIQPwiW+bvEO53tDUQPLZgFTB5vhWq38=
install:
- pip install pipenv
- pipenv install
- aws configure set aws_access_key_id $AWS_ACCESS_KEY
- aws configure set aws_secret_access_key $AWS_SECRET_KEY
- aws configure set default.region $EC2_REGION
- aws configure list
script:
- molecule create --scenario-name aws
- molecule converge --scenario-name aws
- molecule verify --scenario-name aws
- molecule destroy --scenario-name aws
notifications:
  webhooks: https://galaxy.ansible.com/api/v1/notifications/
