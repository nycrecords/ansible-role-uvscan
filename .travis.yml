language: python
python:
- 3.7
env:
  global:
  - MOLECULE_DEBUG: 'true'
  - ROLE_NAME: uvscan
  - EC2_REGION: us-east-1
  - secure: Ogswt9BjzTxhX/hDLTN+9m1lwTyE7Hb0zk39IOR7b5QU+OJnc89Y3DasHafITwq4utzDHP83tWDoC4Y6Gi5TjynKt4ZmOU9XzRrCIlhoCNLNBBVvtSpAu/1C99uSM/tBvCkdNMn1YuSM8GyHi3n9vx4yW1V+IBOu+ZjE9eOMLAEEjovWDHiO03ogq9p8cFRnAknxo/B+JyX2wx3N2bTI6IIShN3xh4YS0ZPSGkqB1hBTBk5D+CdSbxyDvqS1WM1ny7GFfFfaGwcySPcNvyk1exI60i7Jo61HmcQU4OHmSMYU/xdYZZzvBhyhcOUrdsPtdElex8adDis5eBcSKj1ODrdNPM5x2/CradsgGcAjdM4uDFV925vjXUKddSl0A9nMQmqcrtlzvICwoPPBg3slLRDNuNijHVm2TE8JxdW1zEP7SJd53rjLdGD3M1Im9AusesbuNuhE1d+FnwE2UfplSb41XtAWio+PBZ06Os8u1LCSgHDfRSSjq+yFIaum/Dn3I6ML189NPKN0sc5JN9S91AOFQz1Kb0/RNGVeDKZxlag/adfOjpodlzJlGVm0kH2Z08ew0Wu6QLz8F3zgJbxLFj+AhBJv30HF4BvfHq/++Zo+PgVGRxunyLoU61F0yekXNiDiLY+URIFy0hKqianJdx+Yd5HPvx++jRSnCOUZhwk=
  - secure: S+w8sGpwflR9PY6iB0DMfDK51+2v2ejKX2DuhkzD3JKlghBag4ZgJEE5Anbq7o4ttaeG0qGvxEuL/f4Qu5bxpjZWe+6JMmQomEcWahj8T2oDeYQ+FFhNW4OnA7NgHKHmu6c5QEYnp/22zGDShZwnJ4oRQvRl+x7xt/zcGkDxIJ8mNstwTK3aOGZsB+dhUXimGF5sW2qJunMdIBtD6kFgGi00S1VLgKcpE7yqrInqVU0ePfDNcREqEizJvm/GUcdUb7wR5V/lKGwXigYF+jVZ6j3tGtWx86x3wYC+BlKUVpgjykosEpFVrderlO+xwAHZm1TendosVhflN2yPmDEBberuf9ZFaSpZj3lp9loZUT4kpsJoLiBXhORewxi4FU5lYq/yOYasrnLMbV3ji/XxOs7M+icMQvTyB3Zpnz8R8rWIuhraGBFpl/BsUZbIL+kI+QTUwjLud+HFs2RmXJWZ96qqjfEp6mgcehrVhhG5t9AYMRRQpoScJ2/m1KidqVtdY4+dzEBMLwjvPOXop7QokzdN8ihK2nGaXOl4nhRkYENfBXCZ2wcIOSU4wm3E+g9M1afsIBuOTaeJVsMxChOiFNnxEjtAJqJhx7k3gVcRlFWKjGtUPFec31bxdKtGiFjDYUMFCo69ckK/v6go3JnDJAba6CE13skw/ZCPtjZjPUc=
  - secure: Q5WkYdwnFIc+l03s8MkcGVMGxstMwFRFg8fR7QamTkonn8mS1JQLWBCczirY0vj8OW9O4y4rML3lV8oVtH81hH173cpiOVnDGTwPnBK/Z2YUH8/llwE0oX0ajlj2ciO/ZBdfwanEpZGRudx2GifgYUuID0nl/BBgE15hxXq0yMgH26TwVXVBWTdqRSlgB4KGWQLMMqiZyzULOksngL1Y13FKFOZu57xbMuGExP4t1wGueSadBmn97L93+qfZALdLkGW53i8/PNd0UWEJcwe+IHxkb3QrsMFbTIlWtIicaDoBCdYPItclaZFvPr8aMcHQAbroZOl+DdFYvRtjGBao6I9jaEVTGepACKHp30y/3WiV5cP5Ixel5zJVUI2X1+rgondoJia1vHHBhuTEH3cgHH4uoTcB5PhcvGPHZt0CB3ssrs3jdtv2SI1y1Z647XO6YTvstvMH1rl2Pf2YqtDdAZgR9jQianuJZY8aQ3zWhnJCWMeKp53IsjNgOR48nF/zHm790L6u1Z2PyleC1X1kt16tsNJT+kGfaWslk12ug1rrEBoeoNNv41bRkTVH4wWD16RKz9fDl5Uy7FaENVDdtjdz3IFYYD/+zCNblWPOn4zSM0joHNiXMQcOUPYoFotN2hrxWiEHL1QhgoJl6kpp7CENMcYR8XxpzcZrFj0kPGA=
install:
- pip install pipenv
- pipenv install
- aws configure set aws_access_key_id $AWS_ACCESS_KEY
- aws configure set aws_secret_access_key $AWS_SECRET_KEY
- aws configure set default.region $EC2_REGION
- aws configure list
script:
- molecule create --scenario-name aws
- molecule converge --scenario-name aws
- molecule verify --scenario-name aws
- molecule destroy --scenario-name aws
notifications:
  webhooks: https://galaxy.ansible.com/api/v1/notifications/
